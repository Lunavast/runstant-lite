preview
  .inner.z-depth-2
    .header.cyan.lighten-5.grey-text.text-darken-2(onclick='runstant.detailModal.open();')
      span.title {runstant.project.data.setting.title}
    .content
      #preview

    btn-fullscreen(query='preview')

  style.
    preview {
    }
    preview .inner {
      background: white;
    }
    preview .header {
      padding: 3px 10px;
      height: 36px;
      line-height: 36px;
    }
    preview .header .title {
      font-size: 1.2rem;
    }
    #preview {
      width: 100%;
      height: 100%;
    }
    #preview iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  script.
    var self = this;
    this.root.style.width = opts.width;
    this.root.style.height = opts.height;
    this.root.style.float = opts.float;

    this.on('mount', function() {
      var preview = jframe("#preview");
      this.preview = preview;
    });

    this.refresh = function() {
      var v = runstant.project.toCode(true);
      this.preview.load(v);
    };

    this.post = function(v) {
      var frame = self.preview.domElement.querySelector('iframe');
      var win = frame.contentWindow;

      win.postMessage(v, '*');
    };
