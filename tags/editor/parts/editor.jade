editor
  .inner.z-depth-4
    .header
      ul.tabs
        li.tab.col.s3#tab-html
          a(data-type='html', href='#editor-html')
            span.type html
            span.lang {this.data.code.html.type}
        li.tab.col.s3#tab-style
          a(data-type='style', href='#editor-style')
            span.type style
            span.lang {this.data.code.style.type}
        li.tab.col.s3#tab-script
          a(data-type='script', href='#editor-script')
            span.type script
            span.lang {this.data.code.script.type}

    .content
      //- #editor
      #editor-html.editor-unit html
      #editor-style.editor-unit style
      #editor-script.editor-unit script

    btn-fullscreen(query='editor')

  style.
    editor .header {
      margin-bottom: 1px;
      height: 32px;
    }
    .content {
      width: 100%;
      height: calc(100% - 36px);
    }
    #editor, #editor-html, #editor-style, #editor-script {
      width: 100%;
      height: 100%;
    }

    editor .tabs {
      background-color: hsl(0, 0%, 27%);
      height: 36px;
    }
    editor .tabs .tab {
      height: 36px;
      line-height: 36px;
    }

    editor .tabs .indicator {
      background: hsl(60, 100%, 60%);
    }


    @media only screen and (min-width: 601px) {
      editor .tabs li.tab .lang {
        font-size: x-small;
      }

      editor .tabs li.tab .lang:before {
        content: '(';
      }
      editor .tabs li.tab .lang:after {
        content: ')';
      }
    }
    @media only screen and (max-width: 600px) {
      editor .tabs li.tab span.type {
        display: none;
      }
    }
  script.
    var self = this;
    this.data = runstant.data;

    this.root.style.width = opts.width;
    this.root.style.height = opts.height;
    this.root.style.float = opts.float;

    this.on('mount', function() {
      $('editor ul.tabs').tabs();

      toEdit('html');
      toEdit('style');
      toEdit('script');
    });

    var toEdit = function(type) {
      var editor = ace.edit('editor-' + type);
      editor.setTheme("ace/theme/monokai");
      //- editor.getSession().setMode("ace/mode/javascript");

      editor.$blockScrolling = Infinity;
      editor.getSession().setTabSize(2);

      var code = self.data.code[type];

      setMode(editor, code.type);

      //- editor.setValue(runstant.data.code.html.value);
      editor.setValue(code.value);

      editor.commands.addCommand({
        name: "save",
        bindKey: { mac: "Command-S", win: "Ctrl-S", },
        exec: function() {
          var v = editor.getValue();
          code.value = v;
          opts.onsave && opts.onsave();
        }
      });
    };

    var setMode = function(editor, type) {
      var map = {
        "ecmascript6": "javascript",
        "sass": "scss",
      };
      if (map[type]) type = map[type];

      editor.getSession().setMode("ace/mode/" + type);
    };

