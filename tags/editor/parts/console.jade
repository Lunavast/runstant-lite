console
  .content-console
    span(each='{messages}' class='{type}', onclick='confirm("{value}")') {value}
    span#console-input.input(type='text', contenteditable='true', onkeypress='{keypress}')

  style.

    console .content-console {
      position: relative;
      width: 100%;
      height: 100%;
      margin: 0px;
      padding: 5px 20px;
      font-family: Consolas, Monaco, 'ＭＳ ゴシック';
      overflow-x: auto;
    }

    console .content-console span {
      border-bottom: 1px solid #ddd;
      display: block;
      line-height: 1em;
      margin-top: 2px;
      padding-bottom: 2px;
      color: #0055ff;
      font-size: 13px;
      white-space: pre;
      word-wrap: break-word;
    }

    console .content-console span.input {
      outline: 0;
      color: #222;
      border-bottom: 0px;
    }
    console .content-console span.input:before {
      position: absolute;
      left: 7px;
      font-weight: bold;
      content: '> ';
      color: #47b4eb;
    }
    console .content-console span.output {
      outline: 0;
    }
    console .content-console span.output:before {
      position: absolute;
      left: 7px;
      font-weight: bold;
      content: '< ';
      color: #47b4eb;
    }
    console .content-console span.error {
      color: red;
    }

  script.
    var self = this;
    this.root.style.width = opts.width;
    this.root.style.height = opts.height;
    this.root.style.float = opts.float;

    this.messages = [
    ];

    this.stack = [];

    this.on('mount', function() {
      var $input = $("#console-input");
    });

    this.keypress = function(e) {
      if (e.which === 13 && e.shiftKey === false) {
        var target = $(e.target);
        var v = target.text();
        if (v === '') return false;

        target.text('');

        opts.onpost && opts.onpost(v);

        this.stack.push(v);
        this.print('input', v);

        return false;
      }
      return true;
    };

    this.click = function() {
      $('#console-input').focus();
    };

    this.print = function(type, v) {
      this.messages.push({
        type: type,
        value: v,
      });
      this.update();
    };

    this.clear = function() {
      this.messages = [];
      this.update();
    };

    this.focus = function() {
      // タブに反映
      $('util ul.tabs').tabs('select_tab', 'console');
    };



